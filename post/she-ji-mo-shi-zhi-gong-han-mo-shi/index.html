<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    设计模式之工厂模式 | 驯鹿者
</title>
<link rel="shortcut icon" href="https://chasonhuang.github.io/favicon.ico?v=1595415631807">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://chasonhuang.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://chasonhuang.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://chasonhuang.github.io">
                <img class="avatar" src="https://chasonhuang.github.io/images/avatar.png?v=1595415631807" alt="">
            </a>
            <div class="site-title">
                <h1>
                    驯鹿者
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            设计模式之工厂模式
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2020-07-22</time>
                            
                        </div>
                        
                                <div class="post-content">
                                    <p>概念：（不需要new）　　工厂模式的定义：提供创建对象的接口，意思就是根据领导（调用者）的指示（参数），生产相应的产品（对象）。      创建一个对象常常需要复杂的过程，所以不适合在一个复杂的对象中。　　创建对象可能会导致大量的重复代码，也可能提供不了足够级别的抽象。      工厂就是把成员对象的创建工作转交给一个外部对象，好处在于消除对象之间的耦合(也就是相互影响) 分类： 　  简单工厂模式：使用一个类，通常为单体，来生成实例。　　复杂工厂模式定义是：将其成员对象的实列化推到子类中，子类可以重写父类接口方法以便创建的时候指定自己的对象类型。 　　父类只对创建过程中的一般性问题进行处理，这些处理会被子类继承，子类之间是相互独立的，具体的业务逻辑会放在子类中进行编写。简单工厂目的设计一个创建对象的方法，让派生类控制对象创建的过程。何时使用<br>
1. 不知道要创建的具体类<br>
2. 派生类指定具体的创建过程和细节<br>
3. 父类希望延迟创建到派生类</p>
<p>举例很多系统都有用户和用户组的概念，比如linux系统，当系统想创建一个用户的时候，系统会把创建的工作交给各个具体的用户实现类。父类会处理所有的公共操作，派生类则会定一个工厂方法来处理特殊的操作。系统可能又AdminUser和StandardUser，但是他们都派生于UserObject。AdminUser在创建的时候可能会做一些额外的操作确保自己的权限比较大。<br>
GunType {AK,M4A1}interface Shootable {shoot: () =&gt; void;}abstract class Gun implements Shootable {// 抽象产品 - 枪public abstract shoot(): void;}class AK47 extends Gun {//具体产品 - AK47shoot() {console.log(&quot;ak47 shoot.&quot;);}}class M4A1 extends Gun {//具体产品 - M4A1shoot() {console.log(&quot;m4a1 shoot.&quot;);}}class GunFactory {static createGun(type: GunType): Gun {switch (type) {case GunType.AK:return new AK47();case GunType.M4A1:return new M4A1();default:throw Error(&quot;not support this gun yet&quot;);}}}GunFactory.createGun(GunType.AK).shoot();GunFactory.createGun(GunType.M4A1).shoot();抽象工厂目的提供接口创建系列产品何时使用<br>
1. 创建的对象和使用它们的系统是分离的<br>
2. 需要创建的对象是家族式的<br>
3. 创建的众多对象是在一起使用的<br>
4. 具体创建对象的类和系统解耦</p>
<p>举例在游戏中往往需要创建大量对象，下面的代码需要创建巫师和剑士，他们自己分别又包含很多对象。const factoryType = {swordsman: &quot;swordsman&quot;,wizard: &quot;wizard&quot;};class IHeroFactory {createAbilities() {}createEquipment() {}createSkills() {}}class SwordsmanFactory extends IHeroFactory {createAbilities() {return new SwordsmanAbility();}createEquipment() {return new SwordsmanEquipment();}createSkills() {return new SwordsmanSkill();}}class WizardFactory extends IHeroFactory {createAbilities() {return new WizardAbilitiy();}createEquipment() {return new WizardEquipment();}createSkills() {return new WizardSkill();}}class FactoryMaker {static getHeroFactory(type) {var factory = null;switch (type) {case factoryType.wizard:factory = new WizardFactory();break;case factoryType.swordsman:factory = new SwordsmanFactory();break;}return factory;}}class IAbstractSkill {getMainSkill() {}getSecondarySkill() {}}class SwordsmanSkill extends IAbstractSkill {public _mainSkillName: string;public _secondarySkillType: string;constructor() {super();this._mainSkillName = &quot;slash&quot;;this._secondarySkillType = &quot;berserk&quot;;}getMainSkill() {return this._mainSkillName;}getSecondarySkill() {return this._secondarySkillType;}}class WizardSkill extends IAbstractSkill {public _mainSkillName: string;public _secondarySkillType: string;constructor() {super();this._mainSkillName = &quot;fireball&quot;;this._secondarySkillType = &quot;tornado&quot;;}getMainSkill() {return this._mainSkillName;}getSecondarySkill() {return this._secondarySkillType;}}class IAbstractEquipment {getEquipment() {}}class SwordsmanEquipment extends IAbstractEquipment {public _equipment: {};constructor() {super();this._equipment = {type: &quot;Robe of the Chaos&quot;,armor: 20,resistance: 100};}getEquipment() {return this._equipment;}}class WizardEquipment extends IAbstractEquipment {public _equipment: {};constructor() {super();this._equipment = {type: &quot;Wrath of the Lich King&quot;,armor: 3,extraIntelligence: 5,extraMP: 100};}getEquipment() {return this._equipment;}}class IAbstractAbility {getAbilities() {}}class SwordsmanAbility extends IAbstractAbility {public _heroProperties: {};constructor() {super();this._heroProperties = {strength: 10,agility: 5,extraPower: true,extraPowerLevel: 1};}getAbilities() {return this._heroProperties;}}class WizardAbilitiy extends IAbstractAbility {public _heroProperties: {};constructor() {super();this._heroProperties = {strength: 10,intelligence: 30,agility: 5};}getAbilities() {return this._heroProperties;}}(function run() {let wizardFactory = FactoryMaker.getHeroFactory(factoryType.wizard),swordsmanFactory = FactoryMaker.getHeroFactory(factoryType.swordsman);let wiz = {abilities: wizardFactory.createAbilities(),equipment: wizardFactory.createEquipment(),skills: wizardFactory.createSkills()};let swrd = {abilities: swordsmanFactory.createAbilities(),equipment: swordsmanFactory.createEquipment(),skills: swordsmanFactory.createSkills()};let testHero = {abilities: wizardFactory.createAbilities(),equipment: wizardFactory.createEquipment(),skills: swordsmanFactory.createSkills()};console.log(wiz, swrd, testHero);})();</p>

                                </div>
                    </article>
                    <!--  -->
                    
                        <div class="next-post">
                            <div class="next">下一篇</div>
                            <a href="https://chasonhuang.github.io/post/she-ji-mo-shi-zhi-guan-cha-zhe-mo-shi/">
                                <h3 class="post-title">
                                    设计模式之观察者模式
                                </h3>
                            </a>
                        </div>
                        
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                                <!-- id-card -->
                                
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://chasonhuang.github.io/images/avatar.png?v=1595415631807)">
        </div>
        <h1 class="id_card-title">
            驯鹿者
        </h1>
        <h2 class="id_card-description">
            微笑不失礼
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    
                                    

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://chasonhuang.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>